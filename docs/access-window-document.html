<!doctype html><html data-reactroot=""><head><title>How to access the window document object in ReScript?</title><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css" rel="stylesheet"/><link href="static/styles.css" rel="stylesheet"/></head><body><div class="container"><p><a href="/">‚Üê Back to index</a></p><h1>How to access the window document object in ReScript?</h1><p>Sat Dec 12 2020</p><div><pre><code>ReScript version: bs-platform@8.3.3
</code></pre>
<p>As of this writing, there is an <a href="https://github.com/reasonml-community/bs-webapi-incubator">experimental DOM binding</a> being developed.</p>
<p>However if your needs are simple you may like to create your own simple bindings.</p>
<h2>Bindings</h2>
<pre><code class="language-re"><span class="hljs-keyword">module</span> Element = {
  <span class="hljs-keyword">type</span> t
  @bs.send <span class="hljs-keyword">external</span> innerText:<span class="hljs-function"> (<span class="hljs-params">t</span>, <span class="hljs-params">string</span>) =&gt;</span> <span class="hljs-built_in">unit</span> = <span class="hljs-string">&quot;innerText&quot;</span>
}

<span class="hljs-keyword">module</span> Document = {
  <span class="hljs-keyword">type</span> t
  @bs.send <span class="hljs-keyword">external</span> getElementById:<span class="hljs-function"> (<span class="hljs-params">t</span>, <span class="hljs-params">string</span>) =&gt;</span> option&lt;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Element</span>.</span></span>t&gt; = <span class="hljs-string">&quot;getElementById&quot;</span>
}

<span class="hljs-keyword">module</span> Window = {
  <span class="hljs-keyword">type</span> t
  @bs.<span class="hljs-keyword">val</span> <span class="hljs-keyword">external</span> document: <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Document</span>.</span></span>t = <span class="hljs-string">&quot;document&quot;</span>
}
</code></pre>
<h2>Example usage</h2>
<pre><code class="language-re"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Window</span>.</span></span>document
-&gt;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Document</span>.</span></span>get<span class="hljs-constructor">ElementById(<span class="hljs-string">&quot;my-element&quot;</span>)</span>
-&gt;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Belt</span>.</span><span class="hljs-module"><span class="hljs-identifier">Option</span>.</span></span>map((el: <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Element</span>.</span></span>t) =&gt; el-&gt;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Element</span>.</span></span>inner<span class="hljs-constructor">Text(<span class="hljs-string">&quot;Hello&quot;</span>)</span>)
</code></pre>
<p>Here, we're using <code>Belt.Option.map()</code> to get access to the element value, but this could also be a <code>switch</code> statement.</p>
<p>This generates the JavaScript code:</p>
<pre><code class="language-js">Belt_Option.map(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;my-element&quot;</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">el</span>) </span>{
  el.innerText(<span class="hljs-string">&quot;Hello&quot;</span>);
});
</code></pre>
</div></div></body></html>