<!doctype html><html data-reactroot=""><head><title>How to access values in a ReasonML Abstract Record?</title><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css" rel="stylesheet"/><link href="static/styles.css" rel="stylesheet"/></head><body><div class="container"><p><a href="index.html">‚Üê Back to index</a></p><h1>How to access values in a ReasonML Abstract Record?</h1><p>Mon Dec 16 2019</p><div><p>An abstract record type is declared as follows:</p>
<pre><code class="language-reasonml"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">deriving</span> <span class="hljs-identifier">abstract</span>]</span>
<span class="hljs-keyword">type</span> person = {
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
};
</code></pre>
<p>This looks like a ReasonML record, but it's not a record.</p>
<p>This declaration causes the creation of three functions:</p>
<ul>
<li><code>person()</code> the creation function.</li>
<li><code>nameGet()</code> to access the name of a person</li>
<li><code>ageGet()</code> to access the age of a person</li>
</ul>
<p>For example:</p>
<pre><code class="language-reasonml"><span class="hljs-keyword">let</span> joe: person = person(~name=<span class="hljs-string">&quot;Joe&quot;</span>, ~age=<span class="hljs-number">20</span>);

<span class="hljs-keyword">let</span> joeName: <span class="hljs-built_in">string</span> = name<span class="hljs-constructor">Get(<span class="hljs-params">joe</span>)</span>;
</code></pre>
<p>As noted above this is not a record, consider the difference between a normal record and an abstract record:</p>
<pre><code class="language-reasonml"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">deriving</span> <span class="hljs-identifier">abstract</span>]</span>
<span class="hljs-keyword">type</span> abstractPerson = {
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
};

<span class="hljs-keyword">type</span> person = {
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
};

<span class="hljs-keyword">let</span> abstractJoe = abstract<span class="hljs-constructor">Person(~<span class="hljs-params">name</span>=<span class="hljs-string">&quot;Joe&quot;</span>, ~<span class="hljs-params">age</span>=20)</span>;
<span class="hljs-keyword">let</span> joe = {name: <span class="hljs-string">&quot;Joe&quot;</span>, age: <span class="hljs-number">20</span>};

<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Js</span>.</span></span>log(abstractJoe);
<span class="hljs-comment">// {name: &quot;Joe&quot;, age: 20}</span>

<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Js</span>.</span></span>log(joe);
<span class="hljs-comment">// [&quot;Joe&quot;, 20]</span>
</code></pre>
<p>This makes the <code>abstract</code> annotation useful for inter-op with JavaScript.</p>
<p>Suppose you have a object named <code>joe</code> in JavaScript with the fields <code>name</code> and <code>age</code>, we can access this object in ReasonML using:</p>
<pre><code class="language-reasonml"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">val</span>]</span> <span class="hljs-keyword">external</span> john : person = <span class="hljs-string">&quot;john&quot;</span>;
</code></pre>
</div></div></body></html>