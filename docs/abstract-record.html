<!doctype html><html data-reactroot=""><head><title>Abstract records in ReasonML</title><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css" rel="stylesheet"/><link href="static/styles.css" rel="stylesheet"/></head><body><div class="container"><p><a href="index.html">‚Üê Back to index</a></p><h1>Abstract records in ReasonML</h1><p>Mon Dec 30 2019</p><div><h2>Simple abstract record</h2>
<pre><code class="language-re"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">deriving</span> <span class="hljs-identifier">abstract</span>]</span>
<span class="hljs-keyword">type</span> personA = {
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
  job: <span class="hljs-built_in">string</span>,
};

<span class="hljs-keyword">let</span> joe = person<span class="hljs-constructor">A(~<span class="hljs-params">name</span>=<span class="hljs-string">&quot;Joe&quot;</span>, ~<span class="hljs-params">age</span>=22, ~<span class="hljs-params">job</span>=<span class="hljs-string">&quot;Teacher&quot;</span>)</span>;

print<span class="hljs-constructor">_endline(<span class="hljs-params">joe</span>-&gt;<span class="hljs-params">nameGet</span>)</span>;
print<span class="hljs-constructor">_endline(<span class="hljs-params">joe</span>-&gt;<span class="hljs-params">ageGet</span>-&gt;<span class="hljs-params">string_of_int</span>)</span>;
print<span class="hljs-constructor">_endline(<span class="hljs-params">joe</span>-&gt;<span class="hljs-params">jobGet</span>)</span>;
</code></pre>
<h2>Abstract record optional field</h2>
<pre><code class="language-re"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">deriving</span> <span class="hljs-identifier">abstract</span>]</span>
<span class="hljs-keyword">type</span> personB = {
  <span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">optional</span>]</span>
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
  job: <span class="hljs-built_in">string</span>,
};

<span class="hljs-comment">// Notice the `()`</span>
<span class="hljs-keyword">let</span> anon = person<span class="hljs-constructor">B(~<span class="hljs-params">age</span>=23, ~<span class="hljs-params">job</span>=<span class="hljs-string">&quot;Developer&quot;</span>, ()</span>);

<span class="hljs-keyword">let</span> anonName =
  switch (anon-&gt;nameGet) {
  <span class="hljs-pattern-match">| <span class="hljs-constructor">None</span> =&gt;</span> <span class="hljs-string">&quot;Anonymous&quot;</span>
  <span class="hljs-pattern-match">| <span class="hljs-constructor">Some(<span class="hljs-params">name</span>)</span> =&gt;</span> name
  };
print<span class="hljs-constructor">_endline(<span class="hljs-params">anonName</span>)</span>;
</code></pre>
<h2>Abstract record mutable field</h2>
<pre><code class="language-re"><span class="hljs-literal">[@<span class="hljs-identifier">bs</span>.<span class="hljs-identifier">deriving</span> <span class="hljs-identifier">abstract</span>]</span>
<span class="hljs-keyword">type</span> personC = {
  name: <span class="hljs-built_in">string</span>,
  age: <span class="hljs-built_in">int</span>,
  <span class="hljs-keyword">mutable</span> job: <span class="hljs-built_in">string</span>,
};

<span class="hljs-keyword">let</span> jill = person<span class="hljs-constructor">C(~<span class="hljs-params">name</span>=<span class="hljs-string">&quot;Jill&quot;</span>, ~<span class="hljs-params">age</span>=28, ~<span class="hljs-params">job</span>=<span class="hljs-string">&quot;Politician&quot;</span>)</span>;
jill-&gt;job<span class="hljs-constructor">Set(<span class="hljs-string">&quot;Psychologist&quot;</span>)</span>;

print<span class="hljs-constructor">_endline(<span class="hljs-params">jill</span>-&gt;<span class="hljs-params">jobGet</span>)</span>;
</code></pre>
</div></div></body></html>