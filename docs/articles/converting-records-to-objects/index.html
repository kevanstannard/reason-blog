<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Converting between ReasonML records and JavaScript objects - Hello
    </title>
    <link rel="alternate" href="http://localhost:8080/feed.xml" type="application/rss+xml" title="ReasonML and Bucklescript">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <h1>Converting between ReasonML records and JavaScript objects</h1>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><blockquote>
<p><strong>Update Dec 2019</strong>: In BuckleScript &gt;= v7 records are already compiled to <span class="caps">JS</span> objects. jsConverter is therefore obsolete and will generate a no-op function for compatibility<span class="widont">&nbsp;</span>instead.</p>
</blockquote>
<p>BuckleScript provides a <a href="https://bucklescript.github.io/docs/en/generate-converters-accessors">convenience decorator</a> to convert between ReasonML records and JavaScript<span class="widont">&nbsp;</span>objects.</p>
<p>The <code>[@bs.deriving jsConverter]</code> decorator declared above a record type causes two functions to become<span class="widont">&nbsp;</span>available:</p>
<ul>
<li><code>&lt;typename&gt;ToJs</code></li>
<li><code>&lt;typename&gt;FromJs</code></li>
</ul>
<p>Suppose you have a person type, when you add the<span class="widont">&nbsp;</span>decorator:</p>
<pre><code class="language-reasonml"><span class="literal">[@<span class="identifier">bs</span>.<span class="identifier">deriving</span> <span class="identifier">jsConverter</span>]</span>
<span class="keyword">type</span> person = {
  id: <span class="built_in">int</span>,
  name: <span class="built_in">string</span>,
};</code></pre>
<p>It causes the following two functions to become<span class="widont">&nbsp;</span>available:</p>
<pre><code class="language-reasonml"><span class="keyword">let</span> personToJs:<span class="function"> <span class="params">person</span> =&gt;</span> {. <span class="string">"id"</span>: <span class="built_in">int</span>, <span class="string">"name"</span>: <span class="built_in">string</span>};

<span class="keyword">let</span> personFromJs: {.. <span class="string">"id"</span>: <span class="built_in">int</span>, <span class="string">"name"</span>: <span class="built_in">string</span>} =&gt; person;</code></pre>
<p>Example usage:</p>
<pre><code class="language-reasonml"><span class="literal">[@<span class="identifier">bs</span>.<span class="identifier">deriving</span> <span class="identifier">jsConverter</span>]</span>
<span class="keyword">type</span> person = {
  id: <span class="built_in">int</span>,
  name: <span class="built_in">string</span>,
};

<span class="keyword">let</span> sherlock = {id: <span class="number">1</span>, name: <span class="string">"Holmes"</span>};
<span class="module-access"><span class="module"><span class="identifier">Js</span>.</span></span>log2(<span class="string">"sherlock"</span>, sherlock);
<span class="comment">// &gt; sherlock [ 1, 'Holmes' ]</span>

<span class="keyword">let</span> sherlockJs = person<span class="constructor">ToJs(<span class="params">sherlock</span>)</span>;
<span class="module-access"><span class="module"><span class="identifier">Js</span>.</span></span>log2(<span class="string">"sherlockJs"</span>, sherlockJs);
<span class="comment">// &gt; sherlockJs { id: 1, name: 'Holmes' }</span>

<span class="keyword">let</span> sherlockRe = person<span class="constructor">FromJs(<span class="params">sherlockJs</span>)</span>;
<span class="module-access"><span class="module"><span class="identifier">Js</span>.</span></span>log2(<span class="string">"sherlockRs"</span>, sherlockRe);
<span class="comment">// &gt; sherlockRs [ 1, 'Holmes' ]</span></code></pre>
</section>
        </article>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">&laquo; Full blog</a></div>
        <section class="copy">
          <p>&copy; 2019 Kevan Stannard &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a></p>
        </section>
      </div>
    </footer>
  </body>
</html>